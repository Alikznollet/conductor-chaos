[gd_scene load_steps=15 format=3 uid="uid://co3jvbpwp7vnh"]

[ext_resource type="Script" uid="uid://b1g4760sqyqgr" path="res://lib/tracks/track.gd" id="1_65qhm"]
[ext_resource type="Script" uid="uid://bnj21a4a4v1p3" path="res://lib/main/main.gd" id="1_b1lab"]
[ext_resource type="PackedScene" uid="uid://0wlbe5odp6qx" path="res://lib/train/train.tscn" id="2_x52nu"]
[ext_resource type="Script" uid="uid://ckjf4dkbukhe3" path="res://lib/tracks/rail.gd" id="3_x52nu"]
[ext_resource type="Script" uid="uid://bv6pvomqd8ybp" path="res://lib/state/state_manager.gd" id="4_xhtjf"]
[ext_resource type="Script" uid="uid://d28104c44jpko" path="res://lib/state/active_state.gd" id="5_b1lab"]
[ext_resource type="PackedScene" uid="uid://bpkm4f857cblu" path="res://lib/tracks/splitter.tscn" id="5_x7o64"]
[ext_resource type="Script" uid="uid://5fxlwtnb4xdg" path="res://lib/tracks/combiner.gd" id="6_6xup4"]
[ext_resource type="Script" uid="uid://f2h77xdakk66" path="res://lib/state/inactive_state.gd" id="6_x7o64"]
[ext_resource type="Script" uid="uid://cw1fuvqwpjm1v" path="res://lib/station/station_manager.gd" id="10_xgxwf"]
[ext_resource type="PackedScene" uid="uid://drjakkf4aqn5o" path="res://lib/station/station.tscn" id="11_6xup4"]
[ext_resource type="PackedScene" uid="uid://b6x1a5f6okvs5" path="res://lib/ui/game/game_ui.tscn" id="12_wftuq"]

[sub_resource type="Curve" id="Curve_wftuq"]
_data = [Vector2(0, 0.191011), 0.0, 0.0, 0, 0, Vector2(0.639785, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="Curve2D" id="Curve2D_s3fb5"]

[node name="Main" type="Node2D"]
script = ExtResource("1_b1lab")
score_curve = SubResource("Curve_wftuq")

[node name="Track" type="Path2D" parent="." node_paths=PackedStringArray("starting_rail")]
unique_name_in_owner = true
curve = SubResource("Curve2D_s3fb5")
script = ExtResource("1_65qhm")
starting_rail = NodePath("Rail")
metadata/_custom_type_script = "uid://b1g4760sqyqgr"

[node name="Train" parent="Track" instance=ExtResource("2_x52nu")]
unique_name_in_owner = true

[node name="Camera2D" type="Camera2D" parent="Track/Train"]

[node name="Rail" type="Line2D" parent="Track" node_paths=PackedStringArray("junction")]
points = PackedVector2Array(0, 0, 1, 652, 9, 671, 26, 692, 54, 700, 93, 700, 411, 699, 685, 686, 1094, 674)
script = ExtResource("3_x52nu")
junction = NodePath("../Splitter")
metadata/_custom_type_script = "uid://ckjf4dkbukhe3"

[node name="Splitter" parent="Track" node_paths=PackedStringArray("connections") instance=ExtResource("5_x7o64")]
position = Vector2(1104, 671)
connections = [NodePath("../Rail2"), NodePath("../Rail3")]

[node name="Rail2" type="Line2D" parent="Track" node_paths=PackedStringArray("junction")]
points = PackedVector2Array(1125, 670, 1588, 670, 1615, 656, 1640, 630, 1651, 596, 1652, 551, 1652, 342, 1653, 176, 1651, 102, 1637, 72, 1616, 57, 1584, 46, 1545, 44, 1117, 42, 735, 43, 499, 41)
script = ExtResource("3_x52nu")
junction = NodePath("../Combiner")
metadata/_custom_type_script = "uid://ckjf4dkbukhe3"

[node name="Rail3" type="Line2D" parent="Track" node_paths=PackedStringArray("junction")]
points = PackedVector2Array(1107, 657, 1124, 636, 1149, 624, 1176, 617, 1441, 618, 1461, 614, 1477, 601, 1484, 583, 1484, 490, 1482, 381, 1480, 361, 1470, 346, 1455, 336, 1438, 333, 1412, 332, 1100, 333, 819, 332, 789, 320, 772, 304, 757, 288, 738, 268, 652, 170, 621, 139, 582, 96, 547, 77, 503, 51)
script = ExtResource("3_x52nu")
junction = NodePath("../Combiner")
metadata/_custom_type_script = "uid://ckjf4dkbukhe3"

[node name="Combiner" type="Area2D" parent="Track" node_paths=PackedStringArray("connection")]
position = Vector2(496, 46)
script = ExtResource("6_6xup4")
connection = NodePath("../Rail4")
metadata/_custom_type_script = "uid://5fxlwtnb4xdg"

[node name="Rail4" type="Line2D" parent="Track"]
points = PackedVector2Array(488, 45, 458, 44, 426, 33, 401, 20, 375, 8, 305, 7, 194, 5, 15, 4)
script = ExtResource("3_x52nu")
metadata/_custom_type_script = "uid://ckjf4dkbukhe3"

[node name="StateManager" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
unique_name_in_owner = true
script = ExtResource("4_xhtjf")
initial_state = NodePath("ActiveState")
metadata/_custom_type_script = "uid://bv6pvomqd8ybp"

[node name="ActiveState" type="Node" parent="StateManager"]
script = ExtResource("5_b1lab")
metadata/_custom_type_script = "uid://d28104c44jpko"

[node name="InactiveState" type="Node" parent="StateManager"]
script = ExtResource("6_x7o64")
metadata/_custom_type_script = "uid://f2h77xdakk66"

[node name="StationManager" type="Node2D" parent="."]
unique_name_in_owner = true
script = ExtResource("10_xgxwf")
metadata/_custom_type_script = "uid://cw1fuvqwpjm1v"

[node name="A" parent="StationManager" instance=ExtResource("11_6xup4")]
position = Vector2(575, 714)
rotation = -0.0372261

[node name="B" parent="StationManager" instance=ExtResource("11_6xup4")]
position = Vector2(1132, 313)
rotation = -3.14062

[node name="C" parent="StationManager" instance=ExtResource("11_6xup4")]
position = Vector2(1681, 345)
rotation = -1.56351

[node name="GameUI" parent="." instance=ExtResource("12_wftuq")]
unique_name_in_owner = true

[node name="PassengerTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 5.0
autostart = true
